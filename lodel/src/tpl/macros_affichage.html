<!--[

   LODEL - Logiciel d'Edition ELectronique.
   Copyright (c) 2001-2002, Ghislain Picard, Marin Dacos   
   Copyright (c) 2003, Ghislain Picard, Marin Dacos, Luc Santeramo, Nicolas Nutten, Anne Gentil-Beccot
   Copyright (c) 2004, Ghislain Picard, Marin Dacos, Luc Santeramo, Anne Gentil-Beccot, Bruno Cénou
   
   Home page: http://www.lodel.org
   E-Mail: lodel@lodel.org
                             All Rights Reserved
      This program is free software; you can redistribute it and/or modify
      it under the terms of the GNU General Public License as published by
      the Free Software Foundation; either version 2 of the License, or
      (at your option) any later version.
      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU General Public License for more details.
      You should have received a copy of the GNU General Public License
      along with this program; if not, write to the Free Software
      Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.]-->


<!--[ ****************************************************************** ]-->
<!--[ Librairie d'affichage                                              ]-->
<!--[ Auteurs :                                                          ]-->
<!--[ Marin Dacos. 2002.                                                 ]-->
<!--[ Nicolas Nutten. 2003.                                              ]-->
<!--[ Cette librairie contient :                                         ]-->
<!--[ <MACRO NAME="NOMBRE_DE_TEXTES_INTEGRAUX_PUBLIES">                  ]-->
<!--[ <MACRO NAME="AFFICHER_NUMEROS_PUBLIES">                            ]-->
<!--[ <MACRO NAME="TITRE_PUBLICATION">                                   ]-->
<!--[ <MACRO NAME="SOUSTITRE_PUBLICATION">                               ]-->
<!--[ <MACRO NAME="PRESENTER_PUBLICATION">                               ]-->
<!--[ <MACRO NAME="PRESENTER_PUBLICATION_SANS_INTRODUCTION">             ]-->
<!--[ <MACRO NAME="PARU_DANS">                                           ]-->
<!--[ <MACRO NAME="PARU_DANS_SIMPLE">                                    ]-->
<!--[ <MACRO NAME="INFOS_DOCUMENT">		                                ]-->
<!--[ <MACRO NAME="DATE_PUBLICATION_PARENTE">                            ]-->
<!--[ <MACRO NAME="LANGUE_TITRE_BIBLIOGRAPHIE">                          ]-->
<!--[ <MACRO NAME="AFFICHER_LIGNE_DOCUMENT">                             ]-->
<!--[ <MACRO NAME="INFOS_DOCUMENT_SANS_LES_AUTEURS">                     ]-->
<!--[ <MACRO NAME="AFFICHER_TOUT">                                       ]-->
<!--[ <MACRO NAME="DOCUMENTS_PAR_TYPES">                                 ]-->
<!--[ <MACRO NAME="TYPE_ARTICLE">                                        ]-->
<!--[ <MACRO NAME="TYPE_CHRONIQUE">                                      ]-->
<!--[ <MACRO NAME="TYPE_COMPTE_RENDU">                                   ]-->
<!--[ <MACRO NAME="TYPE_POSITION_DE_THESE">                              ]-->
<!--[ <MACRO NAME="TYPE_NOTE_DE_LECTURE">                                ]-->
<!--[ <MACRO NAME="TYPE_PRESENTATION">                                   ]-->
<!--[ <MACRO NAME="DOCUMENTS_ET_REGROUPEMENTS">                          ]-->
<!--[ <MACRO NAME="PRESENTER_DOCUMENTS">                                 ]-->
<!--[ <MACRO NAME="PRESENTER_REGROUPEMENTS">                             ]-->
<!--[ <MACRO NAME="TITRE_DOCUMENT_CLIQUABLE">                            ]-->
<!--[ <MACRO NAME="LISTER_AUTEURS">                                      ]-->
<!--[ <MACRO NAME="LISTER_AUTEURS_CITATION">							    ]-->
<!--[ <MACRO NAME="CITATION">										    ]-->
<!--[ <MACRO NAME="LISTER_AUTEURS_DOCUMENT">                             ]-->
<!--[ <MACRO NAME="DESCRITION_AUTEUR">                                   ]-->
<!--[ <MACRO NAME="LISTER_RUBRIQUES">                                    ]-->
<!--[ <MACRO NAME="DERNIER_NUMERO">                                      ]-->
<!--[ <MACRO NAME="PREMIER_ARTICLE_DERNIER_NUMERO">                      ]-->
<!--[ <MACRO NAME="SOMMAIRE_DERNIER_NUMERO">                             ]-->
<!--[ <MACRO NAME="SOMMAIRE_SANS_TITRE_DERNIER_NUMERO">                  ]-->
<!--[ <MACRO NAME="DERNIERE_RUBRIQUE">                                   ]-->
<!--[ <MACRO NAME="AFFICHER_DOCUMENTS_ANNEXES">                          ]-->
<!--[ <MACRO NAME="ICONE_PUBLICATION">                                   ]-->
<!--[ <MACRO NAME="INTRODUCTION_COMPLETE">                               ]-->
<!--[ <MACRO NAME="INTRODUCTION_COURTE">                                 ]-->
<!--[ <MACRO NAME="INTRODUCTION_COURTE_SIMPLE">                          ]-->
<!--[ ****************************************************************** ]-->

<DEFMACRO NAME="NOMBRE_DE_TEXTES_INTEGRAUX_PUBLIES">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche le nombre des textes intégraux publiés dans le site.       ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="nbtip" TABLE="documents" SELECT="count(*) as nbtextesintegraux" WHERE="texte ne '' AND tplcreation='chargement' AND datepubli le NOW() AND status gt '-1'">
		<DO>
			Nombre de textes intégraux publiés : [#NBTEXTESINTEGRAUX]
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="AFFICHER_NUMEROS_PUBLIES">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche la liste des publications de type numéro, publiées         ]-->
<!--[ ****************************************************************** ]-->
	<div class="titre1">
		Les numéros de <MACRO NAME="NOM_SITE">
		<br/ > 
		<span class="soustitresite">
			<MACRO NAME="DESCRIPTION_SITE">
		</span>
	</div>
		
	<LOOP NAME="liste_numeros_2" TABLE="publications" WHERE="status gt 0" WHERE="tplcreation='creation-numero'" WHERE="idparent=[#ID]" ORDER="rank ASC">
		<DO>
			<div class="afficherdocument">
				<a href="[(#ID|makeurlwithid('index'))]">
					<!--[ TESTE SI ON SE TROUVE DANS LA SERIE DE PRESENTATION ]-->	
					[#TITLE]
				</a>
				<MACRO NAME="SOUSTITRE_PUBLICATION">&nbsp;
				<br />
				<MACRO NAME="INTRODUCTION_COURTE_SIMPLE">
			</div>
		</DO>
		<ALTERNATIVE>
			Aucun numéro disponible actuellement
		</ALTERNATIVE>
	</LOOP>
</DEFMACRO>


<DEFMACRO NAME="TITRE_PUBLICATION">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche, s'il existe, le titre d'une publication.                  ]-->
<!--[ ****************************************************************** ]-->
	<IF COND="[#TITLE]">
		[#TITLE]
	</IF>
</DEFMACRO>

<DEFMACRO NAME="SOUSTITRE_PUBLICATION">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche, s'il existe, le sous-titre d'une publication.             ]-->
<!--[ ****************************************************************** ]-->
	<IF COND="[#SOUSTITRE]">
		 [#SOUSTITRE]
	</IF>
</DEFMACRO>


<DEFMACRO NAME="PRESENTER_PUBLICATION">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Crée un bloc qui affiche le titre du numéro ou de la rubrique,     ]-->
<!--[ sauf s'il est vide, auquel cas il affiche le nom du site.          ]--> 
<!--[ Affiche également le texte d'introduction, s'il existe, avec une   ]-->
<!--[ lettrine.                                                          ]-->
<!--[ Cette macro fait appel aux macros suivantes :                      ]-->
<!--[ <MACRO NAME="BOUTON_EDITER_PUBLICATION">                           ]-->
<!--[ <MACRO NAME="TITRE_PUBLICATION">                                   ]-->
<!--[ <MACRO NAME="SOUSTITRE_PUBLICATION">                               ]-->
<!--[ <MACRO NAME="INTRODUCTION_COMPLETE">                               ]-->
<!--[ ****************************************************************** ]-->
	<h1 class="accueil">
                <MACRO NAME="TITRE_PUBLICATION">
		<span class="soustitresite">
			<MACRO NAME="SOUSTITRE_PUBLICATION">
		<MACRO NAME="BOUTON_EDITER_PUBLICATION">
	 	</span>
	</h1>
	<IF COND="[#INTRODUCTION]">
		<p class="extrait">
			<MACRO NAME="INTRODUCTION_COMPLETE">
		</p>
	</IF>			
</DEFMACRO>

<DEFMACRO NAME="PRESENTER_PUBLICATION_SANS_INTRODUCTION">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Crée un bloc qui affiche le titre du numéro ou de la rubrique,     ]-->
<!--[ sauf s'il est vide, auquel cas il affiche le nom du site.          ]--> 
<!--[ Cette macro fait appel aux macros suivantes :                      ]-->
<!--[ <MACRO NAME="BOUTON_EDITER_PUBLICATION">                           ]-->
<!--[ <MACRO NAME="TITRE_PUBLICATION">                                   ]-->
<!--[ <MACRO NAME="SOUSTITRE_PUBLICATION">                               ]-->
<!--[ ****************************************************************** ]-->
	<h1 class="accueil">
		 Sommaire du numéro: <MACRO NAME="TITRE_PUBLICATION"> 
		<span class="soustitresite">
			<MACRO NAME="SOUSTITRE_PUBLICATION">		
			<MACRO NAME="BOUTON_EDITER_PUBLICATION">

	 	</span>
	</h1>	
</DEFMACRO>

<DEFMACRO NAME="PARU_DANS">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche la publication d'où provient un document.                  ]-->
<!--[ Cette macro fait appel à la macro suivante :                       ]-->
<!--[ ****************************************************************** ]-->
        <LOOP NAME="publication_parente" TABLE="publications" WHERE="id='[#IDPARENT]'">
        <DO>
	<h1 class="accueil">
	<a href="[(#ID|makeurlwithid('index'))]">
		[#TITLE]
	</a>
	</h1>
         </DO>
        </LOOP>
</DEFMACRO>

 

<DEFMACRO NAME="PARU_DANS_SIMPLE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche la publication d'où provient un document.                  ]-->
<!--[ (sobrement, c'est pour les index)                                  ]-->
<!--[ Cette macro fait appel à la macro suivante :                       ]-->
<!--[ <MACRO NAME="BOUTON_EDITER_PUBLICATION_DEPUIS_DOCUMENT">           ]-->
<!--[ ****************************************************************** ]-->
        <LOOP NAME="paru_dans_simple_publication" TABLE="publications" WHERE="id='[#IDPARENT]'">
        <DO>
   	<IF COND="[#TITLE]">
	        Paru dans : 
		<a  href="[(#IDPARENT|makeurlwithid('index'))]">
                [#TITLE]
		</a>
		<MACRO NAME="BOUTON_EDITER_PUBLICATION_DEPUIS_DOCUMENT">
	</IF>
        </DO>
        </LOOP>
</DEFMACRO>



<DEFMACRO NAME="INFOS_DOCUMENT">		
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche en une ligne des informations concernant l'article : le ou ]-->
<!--[ les auteurs, le titre cliquable amenant à l'article et la          ]-->
<!--[ publication d'où provient l'article.                               ]-->
<!--[ Cette macro est plutôt destinée aux index.                         ]-->
<!--[ Cette macro fait appel aux macros suivantes :                      ]-->
<!--[ <MACRO NAME="LISTER_AUTEURS">                                      ]-->
<!--[ <MACRO NAME="BOUTON_STATUT_PUBLIER_DOCUMENT">                      ]-->
<!--[ <MACRO NAME="PARU_DANS_SIMPLE">                                    ]-->
<!--[ ****************************************************************** ]-->
	<MACRO NAME="LISTER_AUTEURS">
	<MACRO NAME="TITRE_DOCUMENT_CLIQUABLE">
	<MACRO NAME="BOUTON_STATUT_PUBLIER_DOCUMENT"><br />
	<MACRO NAME="PARU_DANS_SIMPLE">
</DEFMACRO>

<DEFMACRO NAME="DATE_PUBLICATION_PARENTE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche la date de publication parente d'un document, si elle      ]-->
<!--[ existe sinon n'affiche rien.                                       ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="date_publication_parente" TABLE="publications" TABLE="relations" WHERE="id2='[#ID]' AND type!='regroupement' AND id=id1" ORDER="degree"> 
		<DO>
			<IF COND="[#DATE]!='0000-00-00'">
				Texte publié le : [(#DATE|humandate)]
			</IF>
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="LANGUE_TITRE_BIBLIOGRAPHIE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche le titre de la partie Bibliographie (ici "Bibliographie")  ]-->
<!--[ dans la langue définie pour le texte d'un document.                ]-->
<!--[ ****************************************************************** ]-->
	<IF COND="([#LANG] EQ 'fr') OR ([#LANG] EQ 'FR')">
		Références bibliographiques
	<ELSE/>
		<IF COND="([#LANG] EQ 'en') OR ([#LANG] EQ 'EN')">
			Bibliography
		<ELSE/>
			<IF COND="([#LANG] EQ 'it') OR ([#LANG] EQ 'IT')">
				Bibliografia
			<ELSE/>
				<IF COND="([#LANG] EQ 'es') OR ([#LANG] EQ 'ES')">
					Bibliografía
				<ELSE/>
					<IF COND="([#LANG] EQ 'de') OR ([#LANG] EQ 'DE')">
						Bibliographie
					<ELSE/>
						Bibliographie
					</IF>
				</IF>
			</IF>
		</IF>
	</IF>
</DEFMACRO>

<DEFMACRO NAME="AFFICHER_LIGNE_DOCUMENT">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche en une ligne un point, l'auteur cliquable le titre et des  ]-->
<!--[ boutons supplémentaires pour les les admin/editeurs/rédacteur.     ]-->
<!--[ Cette macro est plutôt destinée aux sommaires                      ]-->
<!--[ Cette macro fait appel aux macros suivantes :                      ]-->
<!--[ <MACRO NAME="LISTER_AUTEURS_DOCUMENT">                             ]-->
<!--[ <MACRO NAME="TITRE_DOCUMENT_CLIQUABLE">                            ]-->
<!--[ <MACRO NAME="BOUTON_STATUT_PUBLIER_DOCUMENT">                      ]-->
<!--[ <MACRO NAME="BLOC_CHANGER_ORDRE_DOCUMENT">                         ]-->
<!--[ <MACRO NAME="BOUTON_EDITER_DOCUMENT">                              ]-->
<!--[ ****************************************************************** ]-->
	<MACRO NAME="LISTER_AUTEURS_DOCUMENT">
	<MACRO NAME="TITRE_DOCUMENT_CLIQUABLE">
	<MACRO NAME="BOUTON_STATUT_PUBLIER_DOCUMENT">
	<MACRO NAME="BLOC_CHANGER_ORDRE_DOCUMENT">
	<MACRO NAME="BOUTON_EDITER_DOCUMENT">
</DEFMACRO>

<DEFMACRO NAME="AFFICHER_LIGNE_DOCUMENT_NONCLIQUABLE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche en une ligne un point, l'auteur cliquable le titre et des  ]-->
<!--[ boutons supplémentaires pour les les admin/editeurs/rédacteur.     ]-->
<!--[ Cette macro est plutôt destinée aux sommaires                      ]-->
<!--[ Cette macro fait appel aux macros suivantes :                      ]-->
<!--[ <MACRO NAME="LISTER_AUTEURS_DOCUMENT">                             ]-->
<!--[ <MACRO NAME="TITRE_DOCUMENT_CLIQUABLE">                            ]-->
<!--[ <MACRO NAME="BOUTON_STATUT_PUBLIER_DOCUMENT">                      ]-->
<!--[ <MACRO NAME="BLOC_CHANGER_ORDRE_DOCUMENT">                         ]-->
<!--[ <MACRO NAME="BOUTON_EDITER_DOCUMENT">                              ]-->
<!--[ ****************************************************************** ]-->
	<MACRO NAME="LISTER_AUTEURS_DOCUMENT">
	<MACRO NAME="TITRE_DOCUMENT">
	<MACRO NAME="BOUTON_STATUT_PUBLIER_DOCUMENT">
	<MACRO NAME="BLOC_CHANGER_ORDRE_DOCUMENT">
	<MACRO NAME="BOUTON_EDITER_DOCUMENT">
</DEFMACRO>

<DEFMACRO NAME="INFOS_DOCUMENT_SANS_LES_AUTEURS">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche en une ligne toutes les informations concernant l'article  ]-->
<!--[ sans afficher le ou les auteurs. Affiche le titre et le sous-titre ]-->
<!--[ s'il existe, sous forme de lien amenant à l'article, le type de    ]-->
<!--[ l'article (par ex: chronique, compte rendu, etc ...) la            ]-->
<!--[ publication d'où provient l'article et un lien "Texte intégral" ou ]-->
<!--[ "Texte en ligne le xx/xx/xxxx".                                    ]-->
<!--[ Macro destinée aux index par auteurs.                              ]--> 
<!--[ Cette macro fait appel aux macros suivantes :                      ]-->
<!--[ <MACRO NAME="PARU_DANS_SIMPLE">                                    ]-->
<!--[ <MACRO NAME="BOUTON_STATUT_PUBLIER_DOCUMENT">                      ]-->
<!--[ <MACRO NAME="BOUTON_EDITER_DOCUMENT">                              ]-->
<!--[ ****************************************************************** ]-->
		 <h2><a href="[(#ID|makeurlwithid('index'))]">[#TITLE]<IF COND="[#SOUSTITRE]">. [#SOUSTITRE]</IF></a></h2> ([#TYPE])
			<br />
        <MACRO NAME="PARU_DANS_SIMPLE"> 
	<MACRO NAME="BOUTON_STATUT_PUBLIER_DOCUMENT">
	<MACRO NAME="BOUTON_EDITER_DOCUMENT">
</DEFMACRO>

<DEFMACRO NAME="AFFICHER_TOUTES_LES_PUBLICATIONS">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche les séries linéaires et leurs numéros de 1er niveau puis   ]-->
<!--[ les séries hierarchiques et leurs rubriques de premier niveau.     ]-->
<!--[ Macro plutôt destinée à la barre de navigation verticale.          ]-->
<!--[ ****************************************************************** ]-->
	<!--[ On liste en premier les séries linéaires ]-->
	<LOOP NAME="aff_collec" TABLE="publications" WHERE="idparent='0' AND status gt 0" ORDER="rank">

			<li class="first">
			<a href="[(#ID|makeurlwithid('index'))]">[#TITLE]</a>
			</li>
			
		
		<LOOP NAME="aff_publiparente" TABLE="publications" WHERE="idparent='[#ID]' AND status gt 0" ORDER="rank">
			<li>
				<a href="[(#ID|makeurlwithid('index'))]">[#TITLE]</a>
			</li>
		</LOOP>
	</LOOP>
	
	
</DEFMACRO>

<DEFMACRO NAME="DOCUMENTS_PAR_TYPES">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche la liste des articles en les classant par type.            ]-->
<!--[ ATTENTION, chaque type est codé en dur, il doivent être adaptés à  ]-->
<!--[ chaque publication spécifique.                                     ]-->
<!--[ Cette macro fait appel aux macros suivantes :                      ]-->
<!--[ <MACRO NAME="TYPE_ARTICLE">                                        ]-->
<!--[ <MACRO NAME="TYPE_POSITION_DE_THESE">                              ]-->
<!--[ <MACRO NAME="TYPE_COMPTE_RENDU">                                   ]-->
<!--[ <MACRO NAME="TYPE_NOTE_DE_LECTURE">                                ]-->
<!--[ <MACRO NAME="TYPE_CHRONIQUE">                                      ]-->
<!--[ <MACRO NAME="TYPE_PRESENTATION">                                   ]-->
<!--[ ****************************************************************** ]-->
	<MACRO NAME="TYPE_ARTICLE">
	<MACRO NAME="TYPE_POSITION_DE_THESE">
	<MACRO NAME="TYPE_COMPTE_RENDU">
	<MACRO NAME="TYPE_NOTE_DE_LECTURE">
	<MACRO NAME="TYPE_CHRONIQUE">
	<MACRO NAME="TYPE_PRESENTATION">
</DEFMACRO>

<DEFMACRO NAME="TYPE_ARTICLE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche les articles de type "article".                            ]-->
<!--[ Cette Macro utilise les macros suivantes :                         ]-->
<!--[ <MACRO NAME="FILET_1">                                             ]-->
<!--[ <MACRO NAME="AFFICHER_LIGNE_DOCUMENT">                             ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="article" TABLE="documents" WHERE="idparent='[#ID]'" WHERE="type='article'" ORDER="rank">
		<BEFORE>
			<h2>
				Articles
			</h2>
		</BEFORE> 
		<DO>
			<div class="afficherdocument">
				<MACRO NAME="AFFICHER_LIGNE_DOCUMENT">
			</div>
		</DO>
	</LOOP>
</DEFMACRO>
		
<DEFMACRO NAME="TYPE_CHRONIQUE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche les articles de type "chronique".                          ]-->
<!--[ Cette Macro utilise les macros suivantes :                         ]-->
<!--[ <MACRO NAME="FILET_1">                                             ]-->
<!--[ <MACRO NAME="AFFICHER_LIGNE_DOCUMENT">                             ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="chr" TABLE="documents" WHERE="idparent='[#ID]'" WHERE="type='chronique'" ORDER="rank">
		<BEFORE>
			<h2>
				Chroniques
			</h2>
		</BEFORE>
		<DO>
			<div class="afficherdocument">
				<MACRO NAME="AFFICHER_LIGNE_DOCUMENT">
			</div>
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="TYPE_COMPTE_RENDU">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche les articles de type "compte rendu".                       ]-->
<!--[ Cette Macro utilise les macros suivantes :                         ]-->
<!--[ <MACRO NAME="FILET_1">                                             ]-->
<!--[ <MACRO NAME="AFFICHER_LIGNE_DOCUMENT">                             ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="cr" TABLE="documents" WHERE="idparent='[#ID]'" WHERE="type='compte rendu'" ORDER="rank">
		<BEFORE>
			<h2>
				Comptes Rendus 
			</h2>
		</BEFORE> 
		<DO>
			<div class="afficherdocument">
				<MACRO NAME="AFFICHER_LIGNE_DOCUMENT">
			</div>
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="TYPE_POSITION_DE_THESE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche les articles de type "position de these".                  ]-->
<!--[ Cette Macro utilise les macros suivantes :                         ]-->
<!--[ <MACRO NAME="FILET_1">                                             ]-->
<!--[ <MACRO NAME="AFFICHER_LIGNE_DOCUMENT">                             ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="pdt" TABLE="documents" WHERE="idparent='[#ID]'" WHERE="type='position de these'" ORDER="rank">
		<BEFORE>
			<h2>
				Positions de thèse
			</h2>
		</BEFORE>
		<DO>
			<div class="afficherdocument">
				<MACRO NAME="AFFICHER_LIGNE_DOCUMENT">
			</div>
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="TYPE_NOTE_DE_LECTURE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche les articles de type "note de lecture".                    ]-->
<!--[ Cette Macro utilise les macros suivantes :                         ]-->
<!--[ <MACRO NAME="FILET_1">                                             ]-->
<!--[ <MACRO NAME="AFFICHER_LIGNE_DOCUMENT">                             ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="nl" TABLE="documents" WHERE="idparent='[#ID]'" WHERE="type='note de lecture'" ORDER="rank">
		<BEFORE>
			<h2>
				Notes de lecture 
			</h2>
		</BEFORE> 
		<DO>
			<div class="afficherdocument">
				<MACRO NAME="AFFICHER_LIGNE_DOCUMENT">
			</div>
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="TYPE_PRESENTATION">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche les articles de type "presentation".                       ]-->
<!--[ Cette Macro utilise les macros suivantes :                         ]-->
<!--[ <MACRO NAME="FILET_1">                                             ]-->
<!--[ <MACRO NAME="AFFICHER_LIGNE_DOCUMENT">                             ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="presentation" TABLE="documents" WHERE="idparent='[#ID]'" WHERE="type='presentation'" ORDER="rank">
		<BEFORE>
			<h2>
				Informations
			</h2>
		</BEFORE> 
		<DO>
			<div class="afficherdocument">
				<MACRO NAME="AFFICHER_LIGNE_DOCUMENT">
			</div>
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="DOCUMENTS_ET_REGROUPEMENTS">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Présente les articles puis les regroupements et leurs articles.    ]-->
<!--[ Cette Macro utilise les macros suivantes :                         ]-->
<!--[ <MACRO NAME="PRESENTER_DOCUMENTS">                                 ]-->
<!--[ <MACRO NAME="PRESENTER_REGROUPEMENTS">                             ]-->
<!--[ ****************************************************************** ]-->
	<div class="docregroupement">
		<MACRO NAME="PRESENTER_DOCUMENTS">
		<MACRO NAME="PRESENTER_REGROUPEMENTS">
	</div>
</DEFMACRO>

<DEFMACRO NAME="PRESENTER_DOCUMENTS">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Présente les articles                                              ]-->
<!--[ Cette Macro utilise la macro suivante :                            ]-->
<!--[ <MACRO NAME="AFFICHER_LIGNE_DOCUMENT">                             ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="presenter_documents" TABLE="documents" WHERE="idparent='[#IDENTITE]'" ORDER="rank">
		<DO>
			<div class="afficherdocument">
				<MACRO NAME="AFFICHER_LIGNE_DOCUMENT">
			</div>
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="PRESENTER_REGROUPEMENTS">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Présente les regroupements et les articles qu'ils contiennent.     ]-->
<!--[ Cette Macro utilise les macros suivantes :                         ]-->
<!--[ <MACRO NAME="FILET_1">                                             ]-->
<!--[ <MACRO NAME="PRESENTER_DOCUMENTS">                                 ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="regroupements" TABLE="publications" WHERE="idparent='[#IDENTITE]'" WHERE="type='regroupement'" ORDER="rank DESC">
		<DO>
			<h2 class="regroup">
				<IF COND="[#TITLE]">
					[#TITLE]
				</IF>
			</h2>
			<MACRO NAME="PRESENTER_DOCUMENTS">
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="TITRE_DOCUMENT_CLIQUABLE">  
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche simplement le titre et le sous-titre 						]-->
<!--[ du document et le rend cliquable.      							]-->
<!--[ Remarque : Si on veut mettre en ligne des articles vides pour      ]-->
<!--[ avoir dans les sommaires les titres des futurs articles. Il faut   ]-->
<!--[ créer un nouveau type de document dans la partie administration    ]-->
<!--[ de lodel.                                                          ]-->
<!--[ Par exemple : pour les articles vides créer un type "article_vide" ]-->
<!--[ ainsi cette macro ne rendra pas cliquable le titre de l'article    ]-->
<!--[ dans le sommaire.                                                  ]-->
<!--[ ****************************************************************** ]-->
	<IF COND="[#TYPE]=='article_vide'">
		[#TITLE]<IF COND="[#SOUSTITRE]">
		<br /> [#SOUSTITRE]</IF>
	<ELSE/>
		<div class="article">
		
		<h3>
		<a href="[(#ID|makeurlwithid('index'))]">
			[(#TITRE|removefootnotes)]
		</a>
		</h3>
			<IF COND="[#SOUSTITRE]">
			 <h4>
			 <a href="[(#ID|makeurlwithid('index'))]">
			 [#SOUSTITRE]
			 </a>
			 </h4>
			 </IF>
		
		</div>
	</IF>
</DEFMACRO>

<DEFMACRO NAME="TITRE_DOCUMENT">  
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche simplement le titre et le sous-titre du document 			]-->
<!--[ ****************************************************************** ]-->
	[#TITLE]<IF COND="[#SOUSTITRE]"> <br /> [#SOUSTITRE]</IF>
</DEFMACRO>


<DEFMACRO NAME="LISTER_AUTEURS">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche la liste des auteurs d'un document entre virgules.         ]-->
<!--[ ****************************************************************** ]-->
	<div class="auteur">
	<LOOP NAME="LISTER_AUTEURS_auteurs" TABLE="persons" WHERE="type='auteur'"  WHERE="iddocument='[#ID]'" ORDER="degree">
		<DOFIRST>[#PRENOM] 	[#NOMFAMILLE]</DOFIRST>
		<DO>, [#PRENOM]	[#NOMFAMILLE] </DO>
		<DOLAST>
			 et 
			 [#PRENOM] 
			[#NOMFAMILLE]
		</DOLAST>
		<ALTERNATIVE>
			<IF COND="[#NOMFAMILLE]">,
			</IF>
		</ALTERNATIVE>
	</LOOP>
	</div>
</DEFMACRO>

<DEFMACRO NAME="LISTER_AUTEURS_DOCUMENT">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche la liste des auteurs d'un document entre virgules          ]-->
<!--[ Les auteurs sont cliquables (lien vers index par auteurs)          ]-->
<!--[ L'affichage est destiné aux sommaires : il permet une respiration. ]-->
<!--[ ****************************************************************** ]-->
	<div class="auteur">
		<LOOP NAME="lister_auteurs_document" TABLE="persons" WHERE="type='auteur'"  WHERE="iddocument='[#ID]'" ORDER="degree">
			<DOFIRST>[#PRENOM]<span class="smallcaps"> [#NOMFAMILLE]</span></DOFIRST>
			<DO>, [#PRENOM]<span class="smallcaps"> [#NOMFAMILLE]</span></DO>
			<DOLAST> et [#PRENOM] <span class="smallcaps"> [#NOMFAMILLE]</span></DOLAST>
			<AFTER><IF COND="[#NOMFAMILLE]"></IF></AFTER>
		</LOOP>
	</div>
</DEFMACRO>

<DEFMACRO NAME="LISTER_AUTEURS_CITATION">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche la liste des auteurs d'un document entre virgules, pour 	]-->
<!--[ la notice bibliographique.                                         ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="LISTER_AUTEURS_CITATION_auteurs" TABLE="persons" WHERE="type='auteur'" WHERE="iddocument='[#ID]'" ORDER="degree">
		<DOFIRST>[#PRENOM] [#NOMFAMILLE]</DOFIRST>
		<DO>, [#PRENOM] [#NOMFAMILLE]</DO>
		<DOLAST> et [#PRENOM] [#NOMFAMILLE]</DOLAST>
		<ALTERNATIVE><IF COND="[#NOMFAMILLE]">, </IF></ALTERNATIVE>
	</LOOP>
	
</DEFMACRO>

<DEFMACRO NAME="CITATION">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche notice biblio du doc en cours                              ]-->
<!--[ ****************************************************************** ]-->
	<MACRO NAME="LISTER_AUTEURS_CITATION">. &laquo;[#TITLE]&raquo;. <em><MACRO NAME="NOM_SITE">,</em>
	<LOOP NAME="citation" TABLE="publications" TABLE="relations" WHERE="id2='[#IDPARENT]' AND type!='regroupement' AND id=id1" ORDER="degree"> 
		<DO>
			[#TITLE]
		</DO>
	</LOOP>
	<br />[(#ID|makeurlwithid('index'))]
</DEFMACRO>

<DEFMACRO NAME="DESCRIPTION_AUTEURS"> 
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche la liste description des auteurs dans le document          ]-->
<!--[ ****************************************************************** ]-->
<LOOP NAME="description_auteur" TABLE="persons" WHERE="iddocument='[#ID]'" ORDER="degree"> 
	<DO>
		<IF COND="[#DESCRIPTION]">
		 	<h4>
				<strong>Quelques mots à propos de :&nbsp;</strong> 
				<a class="auteur" href="personne.[#EXTENSIONSCRIPTS]?type=auteur&id=[#ID]">
					[#PRENOM]&nbsp;
					<span class="smallcaps">[#NOMFAMILLE]</span>
				</a>
			</h4>
		 	<div class="descriptionauteur">[#DESCRIPTION]</div>
				
		</IF>
	<IF COND="[#AFFILIATION]">
	
	<div class="descriptionauteur">affiliation : [#AFFILIATION] </div>
	</IF>
	<IF COND="[#FONCTION]">
	<div class="descriptionauteur"><br />fonction : [#FONCTION]</div>
	</IF>
			
	</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="LISTER_RUBRIQUES">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche les rubriques d'une série hiérarchique ou les sous rubriques     ]-->
<!--[ d'une rubrique.                                                        ]-->
<!--[ Macro destinée aux sommaires.                                      ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="boucle_lister_publications" TABLE="publications" WHERE="idparent='[#ID]' AND TYPE!='regroupement'" >
		<DO>
				<a class="titre2" href="[(#ID|makeurlwithid('index'))]">
				<h2>
				<MACRO NAME="TITRE_PUBLICATION">
				</h2>
				</a>
			<div class="afficherdocument">
				<MACRO NAME="INTRODUCTION_COURTE">
			</div>
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="DERNIER_NUMERO">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche le dernier numéro en date. (en fonction du champs date)    ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="le_dernier_numero" TABLE="publications" ORDER="date DESC" WHERE="type='numero'" WHERE="status gt 0" LIMIT="0,1">
		<DO>
			<a  href="[(#ID|makeurlwithid('index'))]">
				Dernier numéro publié : <br />
					[#TITLE]
			</a>
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="PREMIER_ARTICLE_DERNIER_NUMERO">	
<!--[ *************************************************** ]-->
<!--[    version 2.0                                      ]-->
<!--[    Affiche le premier article du dernier numéro     ]-->
<!--[ (en fonction du champ date de la table publication) ]-->
<!--[ *************************************************** ]-->
	<!--[<MACRO NAME="INTRODUCTION_COURTE_SIMPLE">]-->	
	<LOOP NAME="truc" TABLE="publications" ORDER="date DESC" WHERE="status gt 0" WHERE="type='numero'" LIMIT="0,1">
		<LOOP NAME="le_premier_article" TABLE="documents" ORDER="rank ASC" WHERE="idparent='[#ID]'" LIMIT="0,1">
		<IF COND="[#TEXTE]">
			<div class="extrait">
					[(#TEXTE|removefootnotes|couper(1500))]
				<a href="[(#ID|makeurlwithid('index'))]" class="right">
					Lire la suite
				</a>
			</div>
		</IF>
		</LOOP>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="SOMMAIRE_DERNIER_NUMERO">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche le sommaire du dernier numéro en date. (en fonction du     ]-->
<!--[ champs date).                                                      ]-->
<!--[ Cette macro fait appel aux macros suivantes :                      ]-->
<!--[ <MACRO NAME="PRESENTER_PUBLICATION">                               ]-->
<!--[ <MACRO NAME="DOCUMENTS_PAR_TYPES">                                 ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="sommaire_dernier_numero" TABLE="publications" ORDER="date DESC" WHERE="status gt 0" WHERE="type='numero'" LIMIT="0,1">
		<DO>
			<h2 class="sommaire">
				
				<span style="font-size: smaller">Sommaire du dernier numéro en ligne :</span><br />&nbsp;<br />
<a href="[(#ID|makeurlwithid('index'))]">
 [#TITLE] 
				</a><br />&nbsp;<br />
			</h2>
			<MACRO NAME="DOCUMENTS_ET_REGROUPEMENTS">
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="SOMMAIRE_SANS_TITRE_DERNIER_NUMERO">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche le sommaire du dernier numéro en date. (en fonction du     ]-->
<!--[ champs date).                                                      ]-->
<!--[ Cette macro fait appel aux macros suivantes :                      ]-->
<!--[ <MACRO NAME="PRESENTER_PUBLICATION">                               ]-->
<!--[ <MACRO NAME="DOCUMENTS_PAR_TYPES">                                 ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="sommaire_dernier_numero" TABLE="publications" ORDER="date DESC" WHERE="status gt 0" WHERE="type='numero'" LIMIT="0,1">
		<DO>
			<MACRO NAME="DOCUMENTS_ET_REGROUPEMENTS">
		</DO>
	</LOOP>
</DEFMACRO>


<DEFMACRO NAME="DERNIERE_RUBRIQUE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche la dernière rubrique en date. (en fonction du champs date)     ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="le_dernier_rubrique" TABLE="publications" ORDER="Date DESC" WHERE="status gt 0" WHERE="type='rubrique'" LIMIT="0,1">
		<DO>
			<a href="[(#ID|makeurlwithid('index'))]">
				[#TITLE]
			</a>
		</DO>
	</LOOP>
</DEFMACRO>

<DEFMACRO NAME="AFFICHER_DOCUMENTS_ANNEXES">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche les documents annexes.                                     ]-->
<!--[ Cette Macro utilise les macros suivantes :                         ]-->
<!--[ <MACRO NAME="IMG_PUCE">                                            ]-->
<!--[ <MACRO NAME="BLOC_EDITER_DOCUMENT_ANNEXE">                         ]-->
<!--[ <MACRO NAME="BOUTON_AJOUTER_DOCUMENT_ANNEXE">                      ]-->
<!--[ ****************************************************************** ]-->
	<LOOP NAME="docannexe" TABLE="documents" WHERE="idparent='[#ID]' AND type LIKE 'documentannexe-%'" ORDER="rank">
		<BEFORE>
	<h4>
		Documents annexes
	</h4>
	<div class="texte" >
	Il y a [#NBRESULTATS] document[(#NBRESULTATS|pluriel)] annexé[(#NBRESULTATS|pluriel)] à cet article.
	<br />
	<br />
	<ul class="puce">
		</BEFORE>
		<DO>
			<li>
				<!--[ Titre du doc annexe ]-->
				<span class="bold">
	                                <IF COND="[#TYPE]=='documentannexe-lienfichier'">
					<a title="[#TITLE]" href="docannexe.[#EXTENSIONSCRIPTS]?id=[#ID]">[#TITLE]</a> ([(#LIEN|nicefilesize)])
	                                <ELSE/>
					<a title="[#TITLE]" href="[#LIEN]" target="[#TITLE]">[#TITLE]</a>
	                                </IF>
				</span>
				<p>
					<!--[ Commentaire du doc annexe ]-->
					[#COMMENTAIRE]
				</p>
				<p>
					<MACRO NAME="BLOC_EDITER_DOCUMENT_ANNEXE">	
				</p>
			</li>
		</DO>
		<AFTER>
			</ul>
		</AFTER>
	</LOOP>
	<!--[ Propose aux rédacteurs d'ajouter un document  -]-->
	<MACRO NAME="BOUTON_AJOUTER_DOCUMENT_ANNEXE">
</DEFMACRO>

<DEFMACRO NAME="ICONE_PUBLICATION">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche, s'il elle existe, l'icône de la publication.              ]-->
<!--[ ****************************************************************** ]-->
	<IF COND="[#ICONE]">
		<a href="[(#ID|makeurlwithid('index'))]">
			<img src="[#ICONE]" align='left' name="[#IDENTIFIANT]" border='0' alt="[#IDENTIFIANT]" hspace="8" vspace="8">
		</a>
	</IF>
</DEFMACRO>

<DEFMACRO NAME="INTRODUCTION_COMPLETE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche, si elle existe, l'introduction d'une publication, avec    ]-->
<!--[ une icône et une lettrine.                                         ]-->
<!--[ Cette macro fait appel à la macro suivante :                       ]-->
<!--[ <MACRO NAME="ICONE_PUBLICATION">                                   ]-->
<!--[ ****************************************************************** ]-->
	<IF COND="[#TEXTE]">
		<MACRO NAME="ICONE_PUBLICATION">
		[(#TEXTE|lettrine)]
	</IF>
</DEFMACRO>

<DEFMACRO NAME="INTRODUCTION_COURTE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche avec une icône et une lettrine les 1500 premiers           ]-->
<!--[ caractères de l'introduction d'une publication.                    ]-->
<!--[ Cette macro fait appel à la macro suivante :                       ]-->
<!--[ <MACRO NAME="ICONE_PUBLICATION">                                   ]-->
<!--[ ****************************************************************** ]-->
	<IF COND="[#TEXTE]">
		<MACRO NAME="ICONE_PUBLICATION">
		<!--[ affiche les 1500 premiers mots du texte ]-->
		[(#TEXTE|lettrine|couper(1500))]
		<a  href="[(#ID|makeurlwithid('index'))]">
			... lire la suite...
		</a>
	<ELSE/>
		<a  href="[(#ID|makeurlwithid('index'))]">
			... lire ...
		</a>
	</IF>
</DEFMACRO>

<DEFMACRO NAME="INTRODUCTION_COURTE_SIMPLE">
<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche sans lettrine les 1500 premiers caractères de              ]-->
<!--[ l'introduction d'une publication.                                  ]-->
<!--[ ****************************************************************** ]-->
	<IF COND="[#TEXTE]">
		<br />
		<!--[ affiche les 1500 premiers mots du texte ]-->
		[(#TEXTE|couper(1500))]
		<a class=" titre2" href="[(#ID|makeurlwithid('index'))]">
			... lire la suite...
		</a>
	<ELSE/>
		<a class=" titre2" href="[(#ID|makeurlwithid('index'))]">
			... lire ...
		</a>
	</IF>
</DEFMACRO>



<DEFMACRO NAME="RECENSIONS">

<!--[ ****************************************************************** ]-->
<!--[ version 2.0                                                        ]-->
<!--[ Affiche les recensions, ou les documents recensés s'il y en a      ]-->
<!--[ ****************************************************************** ]-->


<LOOP NAME="parent_compterendu" TABLE="documents" WHERE="id='[#IDPARENT]'">
	<div class="titre3">
						&gt;&gt; Voir le compte-rendu :
					</div>
<div class="afficherdocument">
<a class="menu2" href="[(#ID|makeurlwithid('index'))]">[#TITLE] </a>
<br /><br />
</div>
</LOOP>	
<LOOP NAME="parent_compterendu2" TABLE="documents" WHERE="idparent='[#ID]'">

		<h4>
						&gt;&gt; Voir l'article recensé :
					</h4>
<div class="afficherdocument">
<a href="[(#ID|makeurlwithid('index'))]">[#NOTICEBIBLIO] </a>
</div>
<br /><br />
</LOOP>
					
				
</DEFMACRO>	
		
