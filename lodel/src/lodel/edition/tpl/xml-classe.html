<!--[

   LODEL - Logiciel d'Edition ELectronique.
   Copyright (c) 2001-2002, Ghislain Picard, Marin Dacos
   Copyright (c) 2003, Ghislain Picard, Marin Dacos, Luc Santeramo, Nicolas Nutten, Anne Gentil-Beccot
   Copyright (c) 2004, Ghislain Picard, Marin Dacos, Luc Santeramo, Anne Gentil-Beccot, Bruno Cénou
   Home page: http://www.lodel.org
   E-Mail: lodel@lodel.org
                             All Rights Reserved
      This program is free software; you can redistribute it and/or modify
      it under the terms of the GNU General Public License as published by
      the Free Software Foundation; either version 2 of the License, or
      (at your option) any later version.
      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU General Public License for more details.
      You should have received a copy of the GNU General Public License
      along with this program; if not, write to the Free Software
      Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.]-->


<LOOP NAME="URL_SITE_XML" TABLE="sites" WHERE="name='[#SITE]'">
<document xmlns="[#URL]/schema" xmlns:xhtml="http://www.w3.org/1999/xhtml">  
</LOOP>



  <!--[ affiche les personnes ]-->
  <LOOP NAME="persontypes" TABLE="persontypes" TABLE="typeentites_persontypes" WHERE="idpersontype=id AND identitytype='[#IDTYPE]' AND status gt 0" ORDER="rank">
    <DO>
	<LOOP NAME="lespersonnes" TABLE="persons" WHERE="identity='[#IDENTITE]' and idtype='[#ID]'" ORDER="rank">
	  <BEFORE>
            <gr[(#TYPE|removespace)]>
          </BEFORE>
	  <DO>
	    <[(#TYPE|removespace)] ordre="[#RANK]">
	    [<prefix>(#PREFIX)</prefix>]
	    <prenom>[(#PRENOM)]</prenom>
	    <nomfamille>[(#NOMFAMILLE)]</nomfamille>
	    [<description>(#DESCRIPTION|namespace)</description>]
	    [<fonction>(#FONCTION|namespace)</fonction>]
	    [<affiliation>(#AFFILIATION|namespace)</affiliation>]
	    [<courriel>(#COURRIEL)</courriel>]
	    </[(#TYPE|removespace)]>
	  </DO>
	  <AFTER>
            </gr[(#TYPE|removespace)]>
          </AFTER>
	</LOOP>
    </DO>
  </LOOP>
  <!--[ ]-->

  <!--[ affiche les entrees ]-->
  <LOOP NAME="entrytypes" TABLE="entrytypes" TABLE="typeentites_entrytypes" WHERE="identrytype=id AND identitytype='[#IDTYPE]' AND status gt 0" ORDER="rank">
    <DO>
	<LOOP NAME="lesentrees" TABLE="entries" WHERE="idtype='[#ID]' AND identity='[#IDENTITE]'" ORDER="rank">
	  <BEFORE>
            <gr[(#TYPE|removespace)]>
          </BEFORE>
	  <DO>
	    <[(#TYPE|removespace)]>
	    <nom>[#NAME]</nom>
	    <abrev>[#ABREV]</abrev>
	    </[(#TYPE|removespace)]>
	  </DO>
	  <AFTER>
            </gr[(#TYPE|removespace)]>
          </AFTER>
	</LOOP>
    </DO>
  </LOOP>
  <!--[ ]-->

  <!--[ affiche les champs ]-->
  <LOOP NAME="groupesdechamps" SELECT="nom,id" TABLE="fieldgroups" WHERE="class='[#CLASS]'" ORDER="rank">
    <DO>
      <[#NAME]>
      <LOOP NAME="valeurs_des_champs">
	<DO>
	  <!--[ transforme some invalide entry ]-->
	  <IF COND="[#TYPE] eq 'date' and [#VALUE] eq '0000-00-00'"><LET VAR="value"></LET></IF>

	  <!--[ do we need the output this value ? ]-->
	  <IF COND="[#VALUE] and [#CONDITION]!='+'">
	    <IF COND="[#TYPE] eq 'boolean'">
	      <[#NAME]><IF COND="[#VALUE]">true<ELSE/>false</IF></[#NAME]>
	    <ELSE/>
	    <IF COND="[#TYPE] eq 'mltext'">
		  <LOOP NAME="mltext">
		    <DO>
		      <[#NAME] lang="[#LANG]">[(#VALUE|namespace)]</[#NAME]>
	            </DO>
                  </LOOP>
             <ELSE/>
             <IF COND="[#TYPE] eq 'lang'">
	        <[#NAME]>[#VALUE]</[#NAME]>
            <ELSE/>
        	<IF COND="[#TYPE] eq 'date'">
        	  <[#NAME]>[#VALUE]</[#NAME]>
            <ELSE/>
	        <[#NAME]>[(#VALUE|namespace)]</[#NAME]>
            </IF>
            </IF>
            </IF>
            </IF>
           </IF> <!--[ value n'est pas vide ]-->

        </DO>
      </LOOP>
       </[#NAME]>
      </DO>
    </LOOP>

  <!--[ ]-->
  <meta><typedoc>[#TYPE]</typedoc></meta>
</document>
