<!--[

   LODEL - Logiciel d'Edition ELectronique.
   Copyright (c) 2001-2002, Ghislain Picard, Marin Dacos
   Copyright (c) 2003, Ghislain Picard, Marin Dacos, Luc Santeramo, Nicolas Nutten, Anne Gentil-Beccot
   Copyright (c) 2004, Ghislain Picard, Marin Dacos, Luc Santeramo, Anne Gentil-Beccot, Bruno Cénou
   Home page: http://www.lodel.org
   E-Mail: lodel@lodel.org
                             All Rights Reserved
      This program is free software; you can redistribute it and/or modify
      it under the terms of the GNU General Public License as published by
      the Free Software Foundation; either version 2 of the License, or
      (at your option) any later version.
      This program is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
      GNU General Public License for more details.
      You should have received a copy of the GNU General Public License
      along with this program; if not, write to the Free Software
      Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.]-->


<!--[ New macros added by Ghislain 12/2004 ]-->


<!--[ --------------------------------------------------------- 
      TR with alternating class             
--------------------------------------------------------------- ]-->

<DEFMACRO NAME="TR_LIST">
<IF COND="[#COUNT] % 2">
<tr class="ligne_admin1">
<ELSE/>
<tr class="ligne_admin2">
</IF>
</DEFMACRO>


<!--[ --------------------------------------------------------- 
      Ok bouton to come back to index.php
--------------------------------------------------------------- ]-->

<DEFMACRO NAME="OK_TOINDEX">
<div class="pied_de_formulaire">
	<form>
		<input class="form" type="button" value="    OK    " onClick="javascript:window.location='index.php'">
	</form>
</div>
</DEFMACRO>


<!--[ --------------------------------------------------------- 
      Submit / Cancel / Delete bar.
--------------------------------------------------------------- ]-->

<DEFMACRO NAME="EDIT_SUBMIT_BAR">
<div class="pied_de_formulaire">
	<MACRO NAME="SUBMIT_CANCEL_BUTTON">
	  <IF COND="[#ID]">
		<IF COND="![#LO|isdeletelocked([#ID],[#STATUS])]">
			<MACRO NAME="DELETE_BUTTON">
		</IF>
	  </IF>
</div>
</DEFMACRO>

<!--[ --------------------------------------------------------- 
      Ok bouton to submit andgo from edit to list action
--------------------------------------------------------------- ]-->
<DEFMACRO NAME="SUBMIT_CANCEL_BUTTON">
		<IF COND="[#ID]"><input class="form" type="submit" value="[@COMMON.MODIFY]" /><ELSE/><input class="form" type="submit" value="[@COMMON.ADD]" /></IF>
		&nbsp;&nbsp;&nbsp;&nbsp;
		<input class="form" type="button" value="[@COMMON.CANCEL]" onClick="javascript:window.history.go(-1)" />&nbsp;&nbsp;&nbsp;&nbsp;
</DEFMACRO>

<DEFMACRO NAME="DELETE_BUTTON">
		<input class="form" type="button" value="[@COMMON.DELETE]" onClick="javascript:window.location='index.php?do=delete&id=[#ID]&lo=[#LO]'" />
</DEFMACRO>


<!--[ -----------------------------------------------------------
      Arrow up/down to change order
--------------------------------------------------------------- ]-->

<DEFFUNC NAME="CHANGE_RANK_BUTTON" REQUIRED="LO">
<a href="index.php?do=changerank&id=[#ID]&lo=[#LO]&dir=down"><img src="[#SHAREURL]/images/fleche_bas.png" class="picto" width="11" height="8" alt="bas" onmouseover="src='[#SHAREURL]/images/fleche_bas_survol.png'" onmouseout="src='[#SHAREURL]/images/fleche_bas.png'" /></a>
<a href="index.php?do=changerank&id=[#ID]&lo=[#LO]&dir=up"><img src="[#SHAREURL]/images/fleche_haut.png" class="picto" width="11" height="8" alt="haut" onmouseover="src='[#SHAREURL]/images/fleche_haut_survol.png'" onmouseout="src='[#SHAREURL]/images/fleche_haut.png'" /></a>
</DEFFUNC>



<!--[ -----------------------------------------------------------
      Modify and delete button
--------------------------------------------------------------- ]-->

<DEFFUNC NAME="MODIFY_DELETE_BUTTON" REQUIRED="LO">

<IF COND="([#LODELUSER.RIGHTS] ge [#LO|rights('protect')]) or ([#LODELUSER.RIGHTS] ge [#LO|rights('write')] and [#STATUS] lt 32)">
         |&nbsp;<a href="index.php?do=view&id=[#ID]&lo=[#LO]">[@COMMON.MODIFY]</a>&nbsp;|&nbsp;
	<IF COND="[#STATUS] ge 32">
	  <span class="inactif">[@COMMON.DELETE] ([@COMMON.PROTECTED])</span>&nbsp;|&nbsp;
       <ELSE/>
	  <IF COND="[#LO|isdeletelocked([#ID],[#STATUS])]">
	  <span class="inactif">[@COMMON.DELETE] ([#LO|isdeletelocked([#ID],[#STATUS])])</span>&nbsp;|&nbsp;
	  <ELSE/>
	  <a href="index.php?do=delete&id=[#ID]&lo=[#LO]">[@COMMON.DELETE]</a>&nbsp;|&nbsp;
	  </IF>
	</IF>
<ELSE/>
	 |&nbsp;<span class="inactif">[@COMMON.MODIFY]</span>&nbsp;|&nbsp;
	  <span class="inactif">[@COMMON.DELETE]</span>&nbsp;|&nbsp;
</IF>
	  <a href="index.php?do=copy&id=[#ID]&lo=[#LO]">[@COMMON.COPY]</a> |
</DEFFUNC>




<!--[ -----------------------------------------------------------
      JS to follow an url with a select
--------------------------------------------------------------- ]-->
<DEFMACRO NAME="JS_SELECT_URL">
	<script type="text/javascript"><!--
	
		function select_url(obj) {
			var index = obj.selectedIndex;
			if (obj.options[index].value) window.location=obj.options[index].value;
		}
	//
	--></script>
</DEFMACRO>


<!--[ -----------------------------------------------------------
      Afficher les options d'un groupe  
--------------------------------------------------------------- ]-->


<DEFMACRO NAME="AFFICHER_OPTIONS_DU_GROUPE">
	<!--[ Affiche tous les champs du groupe courant ]-->
        <LET VAR="groupname">[#NAME]</LET>
	<LOOP NAME="options" TABLE="options" ORDER="rank,name" WHERE="status gt 0" WHERE="idgroup='[#ID]'">
		<DO>
		<MACRO NAME="TR_LIST">
			<td><strong>[(#TITLE|nbsp)]</strong></td>
			<td>[<!-- -->#OPTION.[#GROUPNAME|strtoupper].[#NAME|strtoupper]]</td>
			<td>[(#TYPE|nbsp)]</td>
			<td>[(#DEFAULTVALUE|nbsp)]</td>
			<td align="left" style="color: #CC9933;">
			<div>
				 <FUNC NAME="CHANGE_RANK_BUTTON" LO="options">
                	         <FUNC NAME="MODIFY_DELETE_BUTTON" LO="options">
			</div>
			</td>
		</tr>
		</DO>
		<ALTERNATIVE>
			<tr><td colspan="5"><span class="texte_info">[@ADMIN.NO_DATAFIELD_GROUP]</span></td></tr>
		</ALTERNATIVE>
	</LOOP>
</DEFMACRO>





<!--[ -----------------------------------------------------------
      Affichage des types de classes et des classes
--------------------------------------------------------------- ]-->

<DEFFUNC NAME="select_url_classes" REQUIRED="url">

</DEFFUNC>