<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<!--
  LODEL - Logiciel d'Edition ELectronique.

  Copyright (c) 2001-2002, Ghislain Picard, Marin Dacos
  Copyright (c) 2003, Ghislain Picard, Marin Dacos, Luc Santeramo, Nicolas Nutten, Anne Gentil-Beccot
  Copyright (c) 2004, Ghislain Picard, Marin Dacos, Luc Santeramo, Anne Gentil-Beccot, Bruno Cenou

  Home page: http://www.lodel.org

  E-Mail: lodel@lodel.org

                            All Rights Reserved

     This program is free software; you can redistribute it and/or modify
     it under the terms of the GNU General Public License as published by
     the Free Software Foundation; either version 2 of the License, or
     (at your option) any later version.

     This program is distributed in the hope that it will be useful,
     but WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     GNU General Public License for more details.

     You should have received a copy of the GNU General Public License
     along with this program; if not, write to the Free Software
     Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
-->

<database name="lodel" defaultIdMethod="native">
<table name="objects"
        description="">
<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="class"
        type="VARCHAR"
        size="64" />
</table>

<table name="entities"
        description="Table des entités"
        uniqueid="yes"
	writeright="redactor"
	protectright="redactor">
<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="idparent"
        type="INTEGER"
        default="0"
        required="true" />
<column name="idtype"
        type="INTEGER"
        default="0"
        required="true" />
<column name="identifier"
        type="VARCHAR"
        size="255"
        required="true" />
<column name="entitytitle"
        type="VARCHAR"
        size="255"
        required="true"
        description="short title used in the interface" />
<column name="usergroup"
        type="TINYINT"
        default="1"
        required="true" />
<column name="iduser"
        type="INTEGER"
        default="0"
        required="true" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="status"
        type="TINYINT"
        default="-1"
        required="true" />
<column name="upd"
        type="TIMESTAMP" />
<column name="creationdate"
        type="DATETIME" />
<column name="modificationdate"
        type="DATETIME" />
<column name="creationmethod"
        type="VARCHAR"
        size="16"
        required="true" />
<column name="creationinfo"
        type="VARCHAR"
        size="255"
        required="true"
        description="parameters for the creation" />
<!-- Foreign Key - Added by Jean Lamy - 2005-02-07 -->
<!--<foreign-key foreignTable="types" onDelete="setnull">
<reference
	local="idtype"
	foreign="id" />
</foreign-key>-->
<!-- End foreign key -->
<index name="index_idparent">
<index-column name="idparent" />
</index>
<index name="index_idtype">
<index-column name="idtype" />
</index>
<index name="index_identifier">
<index-column name="identifier" />
</index>
</table>




<table name="relations"
        description="table contenant les relations entre les entites">
<column name="idrelation"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="id1"
        type="INTEGER"
        default="0"
        required="true" />
<column name="id2"
        type="INTEGER"
        default="0"
        required="true" />
<column name="nature"
        type="CHAR"
        size="1"
        default="P"
        required="true" />
<column name="degree"
        type="TINYINT"
        default="0"
        required="true" />
<!-- Foreign Key - Added by Jean Lamy - 2005-02-07 -->        
<!--<foreign-key foreignTable="entities" onDelete="setnull">
<reference
	local="id1"
	foreign="id" />		
</foreign-key>-->
<!--<foreign-key foreignTable="entities" onDelete="setnull">
<reference
	local="id2"
	foreign="id" />		
</foreign-key>-->
<!-- End Foreign Key -->
<index name="index_id1">
<index-column name="id1" />
</index>
<index name="index_id2">
<index-column name="id2" />
</index>
<index name="index_degree">
<index-column name="degree" />
</index>
<index name="index_nature">
<index-column name="nature" />
</index>
</table>



<table name="classes"
        description="table qui contient les classes"
	writeright="admin"
	protectright="adminlodel"
        uniqueid="yes">
<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="class"
        type="VARCHAR"
        size="64"
        required="true"
        description="identifiant unique"
        label="[@ADMIN.NAME]"
        edittype="class" />
<column name="classtype"
        type="VARCHAR"
        size="64"
        required="true"
        visibility="hidden"
        edittype="class" />
<column name="title"
        type="VARCHAR"
        size="255"
        required="true"
        description="name en clair, utiliser dans l interface"
        label="[@ADMIN.INTERFACENAME]"
        edittype="text" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_DATAFIELD]"
        edittype="boolean"/>
<column name="comment"
        type="LONGVARCHAR"
        description="commentaire sur la class"
        label="[@ADMIN.COMMENT]"
        edittype="longtext" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="upd"
        type="TIMESTAMP" />
<index name="index_class"><index-column name="class" /></index>
<unique name="unique_class"><unique-column name="class" /></unique>
</table>



<table name="tablefields"
        description="table qui contient les champs supplementaires"
	writeright="admin"
	protectright="adminlodel">
<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="name"
        type="VARCHAR"
        size="64"
        required="true"
        description="name/identifiant unique"
        label="[@ADMIN.NAME]"
        edittype="tablefield" />
<column name="class"
        type="VARCHAR"
        size="64"
        required="true"
        description="nom de la table (duplicate the information in available through double join with tablefieldgroups and classes"
        visibility="hidden"
        edittype="class"/>
<column name="title"
        type="VARCHAR"
        size="255"
        required="true"
        description="name en clair, utiliser dans l interface"
        label="[@ADMIN.INTERFACENAME]"
        edittype="text" />
<column name="style"
        type="VARCHAR"
        size="255"
        description="style qui conduit a cette balises"
        label="[@ADMIN.STYLE]"
        edittype="mlstyle" />
<column name="type"
        type="VARCHAR"
        size="255"
        required="true"
        description="type du champ"
        label="[@ADMIN.TYPE]"
        edittype="select"
	confirm="confirm_change_type" /> <!-- confirmation is required for this type -->
<column name="g_name"
        type="VARCHAR"
        size="255"
        description="champ generique equivalent"
        label="[@ADMIN.GENERIC_EQUIVALENT]"
        edittype="select"/>
<column name="condition"
        type="VARCHAR"
        size="255"
        required="true"
        description="condition"
        label="[@ADMIN.CONDITION]"
        edittype="select" />
<column name="defaultvalue"
        type="VARCHAR"
        size="255"
        description="valeur par defaut"
        label="[@ADMIN.DEFAULT_VALUE]"
        edittype="text" />
<column name="processing"
        type="VARCHAR"
        size="255"
        description="traitement a faire a l import"
        label="[@ADMIN.PROCESSING_IMPORT]"
        edittype="text" />
<column name="allowedtags"
        type="VARCHAR"
        size="255"
        description="balises acceptees"
        label="[@ADMIN.ALLOWED_TAGS]"
        edittype="multipleselect" /> <!-- complex case -->
<column name="filtering"
        type="LONGVARCHAR"
        description="traitement a faire a l exportation"
        label="[@ADMIN.AUTOMATIC_FILTERING]"
        edittype="text" />
<column name="edition"
        type="VARCHAR"
        size="255"
        description="input pour l edition"
        label="[@ADMIN.INTERFACE_EDITION]"
        edittype="select" />
<column name="editionparams"
        type="VARCHAR"
        size="255"
        description="params pour l edition"
        label="[@ADMIN.PARAMETER_FOR_EDITION]"
        edittype="text" />
<column name="weight"
        type="TINYINT"
        label="[@ADMIN.WEIGHT_FOR_SEARCH_ENGINE]"
        edittype="select"
	editcondition="[#CLASSTYPE]=='entities'" />
<column name="comment"
        type="LONGVARCHAR"
        description="commentaire sur le champs"
        label="[@ADMIN.COMMENT]"
        edittype="longtext" />
<column name="idgroup"
        type="INTEGER"
        default="0"
        required="true"
	label="[@ADMIN.DATAFIELDGROUP]"
	edittype="select"
	editcondition="[#CLASSTYPE]=='entities'" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_DATAFIELD]"
        edittype="boolean"
	 />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="upd"
        type="TIMESTAMP" />
<!-- Foreign Key Add by Jean Lamy - 2005-02-07 -->
<!--<foreign-key foreignTable="tablefieldgroups" onDelete="setnull">
	<reference
		local="idgroup"
		foreign="id" />
</foreign-key>-->
<!-- Not sure for this one -->
<!--<foreign-key foreignTable="classes" onDelete="cascade">
	<reference
		local="class"
		foreign="class" />
</foreign-key>-->
<!-- End Foreign Key -->        
<index name="index_name">
<index-column name="name" />
</index>
<index name="index_idgroup">
<index-column name="idgroup" />
</index>
<index name="index_class">
<index-column name="class" />
</index>
<index name="g_name">
<index-column name="g_name" />
</index>
<unique name="unique_fieldclass">
<unique-column name="name" />
<unique-column name="class" />
</unique>
</table>





<vtable name="indextablefields"
        description=""
	writeright="admin"
	protectright="adminlodel">
<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="name"
        type="VARCHAR"
        size="64"
        required="true"
        description="name/identifiant unique"
        label="[@ADMIN.NAME]"
        edittype="select" />
<column name="class"
        type="VARCHAR"
        size="64"
        required="true"
        description="nom de la table (duplicate the information in available through double join with tablefieldgroups and classes"
        visibility="hidden"
        edittype="class"/>
<column name="title"
        type="VARCHAR"
        size="255"
        required="true"
        description="name en clair, utiliser dans l interface"
        label="[@ADMIN.INTERFACENAME]"
        edittype="text" />
<column name="type"
        type="VARCHAR"
        size="255"
        required="true"
        description="type du champ"
        edittype="class"
        visibility="hidden" />
<column name="edition"
        type="VARCHAR"
        size="255"
        description="input pour l edition"
        label="[@ADMIN.INTERFACE_EDITION]"
        edittype="select" />
<column name="comment"
        type="LONGVARCHAR"
        description="commentaire sur le champs"
        label="[@ADMIN.COMMENT]"
        edittype="longtext" />
<column name="idgroup"
        type="INTEGER"
        default="0"
        required="true"
	label="[@ADMIN.DATAFIELDGROUP]"
	edittype="select"
	editcondition="[#CLASSTYPE]=='entities'" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_DATAFIELD]"
        edittype="boolean"
	 />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="upd"
        type="TIMESTAMP" />
<index name="index_name">
<index-column name="name" />
</index>
<index name="index_idgroup">
<index-column name="idgroup" />
</index>
<unique name="unique_fieldclass">
<unique-column name="name" />
<unique-column name="class" />
</unique>
</vtable>





<table name="tablefieldgroups"
        description="table qui contient les groupes de champs pour le XML"
	writeright="admin"
	protectright="adminlodel">
<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="name"
        type="VARCHAR"
        size="64"
        required="true"
        description="name/identifiant unique"
        label="[@ADMIN.TABLEFIELDGROUP_NAME]"
        edittype="text" />
<column name="class"
        type="VARCHAR"
        size="64"
        required="true"
        description="nom de la table (duplicate the information in available through double join with tablefieldgroups and classes"
        visibility="hidden"
        edittype="class"/>
<column name="title"
        type="VARCHAR"
        size="255"
        required="true"
        description="name en clair, utiliser dans l interface"
        label="[@ADMIN.INTERFACENAME]"
        edittype="text" />
<column name="comment"
        type="LONGVARCHAR"
        description="commentaire sur le groupe de champs"
        label="[@ADMIN.COMMENT]"
        edittype="longtext" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true"
        description="determine qui a les droits de le modifier" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_GROUP]"
        edittype="boolean" 
	editcondition="[#USER.RIGHTS] ge [#LO|rights('protect')]" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="upd"
        type="TIMESTAMP" />
<!-- Foreign Key - Added by Jean Lamy - 2005-02-07 -->        
<!--<foreign-key foreignTable="classes" onDelete="setnull">
<reference
	local="class"
	foreign="class" />		
</foreign-key>-->
<!-- End Foreign Key -->
<index name="index_name">
<index-column name="name" />
</index>
<index name="index_class">
<index-column name="class" />
</index>
<unique name="unique_fieldgroupclass">
<unique-column name="name" />
<unique-column name="class" />
</unique>
</table>


<table name="persons"
        description="Table des entrées des index par personnes"
        uniqueid="yes"
	writeright="redactor"
	protectright="redactor">
<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="g_familyname"
        type="VARCHAR"
        size="255"
        required="true" />
<column name="g_firstname"
        type="VARCHAR"
        size="255"
        required="true" />
<column name="sortkey"
        type="VARCHAR"
        size="255" 
	description="define the alphabetic order. suppleant partial support of utf-8 in mysql"/>
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<column name="upd"
        type="TIMESTAMP" />
        
</table>



<table name="users"
        description="Table des utilisateurs de lodel"
	writeright="admin"
	protectright="adminlodel">
<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="username"
        type="VARCHAR"
        size="64"
        required="true"
        label="[@COMMON.LOGIN]"
        edittype="username" />
<column name="passwd"
        type="VARCHAR"
        size="64"
        label="[@COMMON.PASSWD]"
        edittype="passwd" />
<column name="name"
        type="VARCHAR"
        size="64"
        label="[@ADMIN.LASTNAME_AND_FIRSTNAME]"
        edittype="text" />
<column name="email"
        type="VARCHAR"
        size="255"
        label="[@ADMIN.EMAIL]"
        edittype="email" />
<column name="userrights"
        type="TINYINT"
        default="0"
        required="true"
        label="[@ADMIN.USER_RIGHTS]"
        edittype="select" />
<column name="lang"
        type="CHAR"
        size="5"
        required="true"
        description="user lang"
        label="[@ADMIN.USER_LANG]"
        edittype="lang" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<vcolumn name="usergroups"
	label="[@ADMIN.USERGROUPS]"
	editcondition="[#SITE] and ![#USER.ADMIN]"
	edittype="multipleselect" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_USER]"
        edittype="boolean" />
<column name="upd"
        type="TIMESTAMP" />
<index name="index_username">
<index-column name="username" />
</index>
<unique name="unique_username">
<unique-column name="username" />
</unique>
</table>


<table name="usergroups"
        description="Table des groupes d'utilisateurs de lodel"
	writeright="admin"
	protectright="adminlodel">

<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="name"
        type="VARCHAR"
        size="64"
        label="[@ADMIN.GROUP_NAME]"
        edittype="text" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_USER_GROUP]"
        edittype="boolean" />
<column name="upd"
        type="TIMESTAMP" />
<index name="index_name">
<index-column name="name" />
</index>
</table>



<table name="users_usergroups"
        description="Table pour la relation entre les utilisateurs et les groupes d'utilsateurs">
<column name="idgroup"
        type="INTEGER"
        default="0"
        required="true" />
<column name="iduser"
        type="INTEGER"
        default="0"
        required="true" />
<!-- Foreign Key - Added by Jean Lamy - 2005-02-07 -->        
<!--<foreign-key foreignTable="users" onDelete="cascade">
<reference
	local="iduser"
	foreign="id" />		
</foreign-key>-->
<!--<foreign-key foreignTable="usergroups" onDelete="cascade">
<reference
	local="idgroup"
	foreign="id" />
</foreign-key>-->
<!-- End Foreign Key -->
<index name="index_idgroup">
<index-column name="idgroup" />
</index>
<index name="index_iduser">
<index-column name="iduser" />
</index>
</table>


<table name="types"
        description="Table pour les types d'entites"
        uniqueid="yes"
	writeright="admin"
	protectright="adminlodel">

<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="type"
        type="VARCHAR"
        size="64"
        required="true"
        label="[@ADMIN.NAME_TYPE]"
	edittype="type" />
<column name="title"
        type="VARCHAR"
        size="255"
        required="true"
        label="[@ADMIN.TITLE_TYPE]"
        edittype="text" />
<column name="class"
        type="VARCHAR"
        size="64"
        required="true"
        description="name de la table complementaire"
	visibility="hidden"
	edittype="class" />
<column name="tpl"
        type="VARCHAR"
        size="255"
        description="name du fichier template utilise dans la zone de revue"
        label="[@ADMIN.TEMPLATE_FILE]"
        edittype="tplfile" />
<column name="tplcreation"
        type="VARCHAR"
        size="255"
        description="name du fichier template pour la creation, ou information decrivant la creation"
        label="[@ADMIN.CREATION_TEMPLATE_FILE]"
        edittype="tplfile" />
<column name="tpledition"
        type="VARCHAR"
        size="255"
        description="name du fichier template pour l edition de son contenu"
        label="[@ADMIN.EDITION_TEMPLATE_FILE]"
        edittype="tplfile" />
<column name="import"
        type="TINYINT"
        default="0"
        required="true"
        description="1=import par servOO"
        label="[@ADMIN.IMPORT_WITH_SERVOO]"
        edittype="select" />
<column name="creationstatus"
        type="TINYINT"
        default="0"
        required="true"
        description="status for the new document"
        label="[@ADMIN.STATUS_OF_NEW_DOCUMENTS]"
        edittype="select" />
<column name="display"
        type="VARCHAR"
        size="10"
        description="Mode d affichage"
        label="[@ADMIN.DISPLAY]"
        edittype="select" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_TYPE]"
        edittype="boolean" 
	editcondition="[#USER.RIGHTS] ge [#LO|rights('protect')]" />
<column name="upd"
        type="TIMESTAMP" />
<!-- Foreign Key - Added by Jean Lamy - 2005-02-07 -->        
<!--<foreign-key foreignTable="classes" onDelete="setnull">
<reference
	local="class"
	foreign="class" />		
</foreign-key>-->
<!-- End Foreign Key -->        
<index name="index_type">
<index-column name="type" />
</index>
<unique name="unique_type_per_class">
<unique-column name="type" />
<unique-column name="class" />
</unique>
</table>



<table name="internalstyles"
        description="Table pour les styles internes"
	writeright="admin"
	protectright="adminlodel">
<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="style"
        type="VARCHAR"
        size="255"
        required="true"
        label="[@ADMIN.STYLE]"
	edittype="style" />
<column name="surrounding"
        type="VARCHAR"
        size="255"
        required="true"
        label="[@ADMIN.SURROUNDING_STYLE]"
        edittype="select" />
<column name="conversion"
        type="VARCHAR"
        size="255"
        description="balise vers laquelle le style est convertie"
	label="[@ADMIN.CONVERSION]"
	edittype="text" />
<column name="greedy"
        type="TINYINT"
        default="0"
	label="[@ADMIN.GREEDY]"
	edittype="boolean" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_TYPE]"
        edittype="boolean" 
	editcondition="[#USER.RIGHTS] ge [#LO|rights('protect')]" />
<column name="upd"
        type="TIMESTAMP" />
<index name="index_style">
<index-column name="style" />
</index>
<unique name="unique_style">
<unique-column name="style" />
</unique>
</table>


<table name="characterstyles"
        description="Table pour les styles de caracteres"
	writeright="admin"
	protectright="adminlodel">
<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="style"
        type="VARCHAR"
        size="255"
        required="true"
        label="[@ADMIN.STYLE]"
	edittype="type" />
<column name="conversion"
        type="VARCHAR"
        size="255"
        description="balise vers laquelle le style est convertie"
	label="[@ADMIN.CONVERSION]"
	edittype="text" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_TYPE]"
        edittype="boolean" 
	editcondition="[#USER.RIGHTS] ge [#LO|rights('protect')]" />
<column name="upd"
        type="TIMESTAMP" />
<index name="index_style">
<index-column name="style" />
</index>
<unique name="unique_style">
<unique-column name="style" />
</unique>
</table>


<table name="persontypes"
        description=""
        uniqueid="yes"
	writeright="admin"
	protectright="adminlodel">

<column name="id"
        type="INTEGER"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="type"
        type="VARCHAR"
        size="64"
        required="true"
        description="name/identifiant unique"
        label="[@ADMIN.NAME_PERSON_TYPE]"
        edittype="type" />
<column name="class"
        type="VARCHAR"
        size="64"
	required="true"
	visibility="hidden"
	edittype="class" />
<column name="title"
        type="VARCHAR"
        size="255"
        required="true"
        description="name en clair, utiliser dans l interface"
        label="[@ADMIN.TITLE_PERSON_TYPE]"
        edittype="text" />
<column name="style"
        type="VARCHAR"
        size="255"
        description="style qui conduit a ce type"
        label="[@ADMIN.STYLE_PERSON_TYPE]"
        edittype="style" />
<column name="g_type"
        type="VARCHAR"
        size="255"
        description="type generique equivalent"
        label="[@ADMIN.GENERIC_EQUIVALENT]"
        edittype="select"/>
<column name="tpl"
        type="VARCHAR"
        size="255"
        description="name du fichier template pour l entree"
        label="[@ADMIN.TEMPLATE_FILENAME_FOR_PERSON]"
        edittype="tplfile" />
<column name="tplindex"
        type="VARCHAR"
        size="255"
        description="name du fichier template pour l index"
        label="[@ADMIN.TEMPLATE_FILENAME_PERSON_INDEX]"
        edittype="tplfile" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true"
        description="rank sert pour l interface." />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_TYPE]"
        edittype="boolean"
	editcondition="[#USER.RIGHTS] ge [#LO|rights('protect')]" />
<column name="upd"
        type="TIMESTAMP" />
<!-- Foreign Key - Added by Jean Lamy - 2005-02-07 -->        
<!--<foreign-key foreignTable="classes" onDelete="setnull">
<reference
	local="class"
	foreign="class" />		
</foreign-key>-->
<!-- End Foreign Key -->  
<index name="index_type">
<index-column name="type" />
</index>
<index name="index_g_type">
<index-column name="g_type" />
</index>
<unique name="unique_type">
<unique-column name="type" />
</unique>
</table>


<table name="entrytypes"
        description=""
        uniqueid="yes"
	writeright="admin"
	protectright="adminlodel">

<column name="id"
        type="INTEGER"
        default="0"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="type"
        type="VARCHAR"
        size="64"
        required="true"
        description="name/identifiant unique"
        label="[@ADMIN.NAME_INDEX_TYPE]"
        edittype="type" />
<column name="class"
        type="VARCHAR"
        size="64"
	required="true"
	visibility="hidden"
	edittype="class" />
<column name="title"
        type="VARCHAR"
        size="255"
        required="true"
        description="nom en clair, utiliser dans l interface"
        label="[@ADMIN.TITLE_INDEX_TYPE]"
        edittype="text" />
<column name="style"
        type="VARCHAR"
        size="255"
        description="style qui conduit a cette balises"
        label="[@ADMIN.STYLE_INDEX_TYPE]"
        edittype="style" />
<column name="g_type"
        type="VARCHAR"
        size="255"
        description="type generique equivalent"
        label="[@ADMIN.GENERIC_EQUIVALENT]"
        edittype="select"/>
<column name="tpl"
        type="VARCHAR"
        size="255"
        description="name du fichier template pour l entree"
        label="[@ADMIN.TEMPLATE_FILENAME_FOR_ENTRY]"
        edittype="tplfile" />
<column name="tplindex"
        type="VARCHAR"
        size="255"
        description="name du fichier template pour l index"
        label="[@ADMIN.TEMPLATE_FILENAME_INDEX]"
        edittype="tplfile" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true"
        description="rank sert pour l interface." />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_TYPE]"
        edittype="boolean" 
	editcondition="[#USER.RIGHTS] ge [#LO|rights('protect')]" />
<column name="flat"
        type="TINYINT"
        default="0"
        required="true"
        label="[@ADMIN.FLAT_INDEX]" 
	edittype="boolean"/>
<column name="edition"
        type="VARCHAR"
        size="255"
        description="input pour l edition"
        label="[@ADMIN.INTERFACE_EDITION]"
        edittype="select" />
<column name="newbyimportallowed"
        type="TINYINT"
        default="0"
        label="[@ADMIN.NEWIMPORTALLOWED]"
	edittype="boolean" />
<column name="sort"
        type="VARCHAR"
        size="64"
        default="rank"
        required="true"
        description=""
        label="[@ADMIN.SORTBY]"
	edittype="select" />
<column name="upd"
        type="TIMESTAMP" />
<!-- Foreign Key - Added by Jean Lamy - 2005-02-07 -->        
<!--<foreign-key foreignTable="classes" onDelete="setnull">
<reference
	local="class"
	foreign="class" />		
</foreign-key>-->
<!-- End Foreign Key -->  
<index name="index_type">
<index-column name="type" />
</index>
<index name="index_g_type">
<index-column name="g_type" />
</index>
<unique name="unique_type">
<unique-column name="type" />
</unique>
</table>


<table name="entries"
        description=""
        uniqueid="yes"
	writeright="redactor"
	protectright="redactor">

<column name="id"
        type="INTEGER"
        default="0"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="idparent"
        type="INTEGER"
        default="0"
        required="true"
	label="[@COMMON.PARENT_ENTRY]"
	edittype="select"
	editcondition="![#TYPE_FLAT]"/>
<column name="g_name"
        type="VARCHAR"
        size="255"
        required="true"
        label="[@ADMIN.ENTRY]"
        edittype="text" />
<column name="sortkey"
        type="VARCHAR"
        size="255" 
	description="define the alphabetic order. suppleant partial support of utf-8 in mysql"/>
<column name="lang"
        type="CHAR"
        size="2"
        required="true"
        label="[@COMMON.LANG]"
        edittype="lang" />
<column name="idtype"
        type="INTEGER"
        default="0"
        required="true"
	visibility="hidden"
	edittype="int" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
        label="[@ADMIN.PERMANENT_ENTRY]"
        edittype="boolean" />
<column name="upd"
        type="TIMESTAMP" />
<!-- Foreign Key - Added by Jean Lamy - 2005-02-07 -->        
<!--<foreign-key foreignTable="entrytypes" onDelete="setnull">
<reference
	local="idtype"
	foreign="id" />		
</foreign-key>-->
<!-- End Foreign Key -->  
<index name="index_g_name">
<index-column name="g_name" />
</index>
<index name="index_idparent">
<index-column name="idparent" />
</index>
<index name="index_idtype">
<index-column name="idtype" />
</index>
</table>



<table name="tasks"
        description="task managment"
	writeright="redactor"
	protectright="redactor">

<column name="id"
        type="INTEGER"
        default="0"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="name"
        type="VARCHAR"
        size="255"
        required="true" />
<column name="step"
        type="TINYINT"
        required="true"
        default="0" />
<column name="user"
        type="INTEGER"
        default="0"
        required="true" />
<column name="context"
        type="LONGVARCHAR" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<column name="upd"
        type="TIMESTAMP" />
<!-- Foreign Key - Added by Jean Lamy - 2005-02-07 -->        
<!--<foreign-key foreignTable="users" onDelete="setnull">
<reference
	local="user"
	foreign="id" />		
</foreign-key>-->
<!-- End Foreign Key -->  
</table>



<table name="texts"
        description="Table des minitextes"
	writeright="admin"
	protectright="adminlodel">
<column name="id"
        type="INTEGER"
        default="0"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="name"
        type="VARCHAR"
        size="255"
        description="name"
        label="[@COMMON.NAME]" />
<column name="contents"
        type="LONGVARCHAR"
        description="texte"
        label="[@ADMIN.TEXT]"
        edittype="longtext" />
<column name="lang"
        type="CHAR"
        size="5"
        required="true"
        description="text lang"
        label="[@COMMON.LANG]"
	visibility="hidden" 
	edittype="lang"	/>
<column name="textgroup"
        type="VARCHAR"
        size="255"
        required="true"
        description="text group" 
	visibility="hidden" 
	edittype="text"	/>
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
        label="[@ADMIN.PROTECTED_OPTION]"
        edittype="boolean" />
<column name="upd"
        type="TIMESTAMP" />
<index name="index_name">
<index-column name="name" />
</index>
<index name="index_lang">
<index-column name="lang" />
</index>
<index name="index_textgroup">
<index-column name="textgroup" />
</index>
<unique name="unique_lang">
<unique-column name="name" />
<unique-column name="lang" />
<unique-column name="textgroup" />
</unique>
</table>






<table name="options"
        description="Table des options du site"
	writeright="admin"
	protectright="adminlodel">

<column name="id"
        type="INTEGER"
        default="0"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="name"
        type="VARCHAR"
        size="255"
        required="true"
        description="name/identifiant unique"
        label="[@COMMON.NAME]"
        edittype="text" />
<column name="title"
        type="VARCHAR"
        size="255"
        required="true"
        description="title used in the interface"
        label="[@COMMON.TITLE]"
        edittype="text" />
<column name="idgroup"
        type="INTEGER"
        default="0"
        required="true"
	edittype="int"
	visibility="hidden" />
<column name="type"
        type="VARCHAR"
        size="255"
        label="[@ADMIN.TYPE]"
	edittype="select" />
<column name="value"
        type="LONGVARCHAR"
        description="value" />
<column name="userrights"
        type="TINYINT"
        default="0"
        required="true"
        label="[@ADMIN.USER_RIGHTS]"
        edittype="select" />
<column name="defaultvalue"
        type="LONGVARCHAR"
        description="default value"
        label="[@ADMIN.DEFAULT_VALUE]"
        edittype="text" />
<column name="comment"
        type="LONGVARCHAR"
        description="commentaire sur l'option"
        label="[@ADMIN.COMMENT]"
        edittype="longtext" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
	label="[@COMMON.PROTECTED]"
        edittype="boolean" />
<column name="upd"
        type="TIMESTAMP" />
<!-- Foreign Key - Added by Jean Lamy - 2005-02-07 -->        
<!--<foreign-key foreignTable="optiongroups" onDelete="cascade">
<reference
	local="idgroup"
	foreign="id" />		
</foreign-key>-->
<!-- End Foreign Key --> 
<index name="index_name">
<index-column name="name" />
</index>
<index name="index_idgroup">
<index-column name="idgroup" />
</index>
<unique name="unique_name_idgroup">
<unique-column name="name" />
<unique-column name="idgroup" />
</unique>
</table>



<table name="optiongroups"
        description="Table des groupes d'options"
	writeright="admin"
	protectright="adminlodel">

<column name="id"
        type="INTEGER"
        default="0"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="name"
        type="VARCHAR"
        size="255"
        required="true"
        description="name/identifiant unique"
        label="[@COMMON.NAME]"
        edittype="text" />
<column name="title"
        type="VARCHAR"
        size="255"
        required="true"
        description="title used in the interface"
        label="[@COMMON.TITLE]"
        edittype="text" />
<column name="logic"
        type="VARCHAR"
        size="255"
        description="script to edit this group of options"
        label="[@COMMON.LOGIC]"
        edittype="text" />
<column name="comment"
        type="LONGVARCHAR"
        description="commentaire sur l'option"
        label="[@ADMIN.COMMENT]"
        edittype="longtext" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<column name="exportpolicy"
        type="TINYINT"
        default="0"
        required="true"
        label="[@ADMIN.EXPORT]"
        edittype="boolean" />
<vcolumn name="protected"
	label="[@COMMON.PROTECTED]"
        edittype="boolean" />
<column name="upd"
        type="TIMESTAMP" />
<index name="index_name">
<index-column name="name" />
</index>
<unique name="unique_name">
<unique-column name="name" />
</unique>
</table>




<table name="translations"
        description=""
	writeright="admin"
	protectright="adminlodel">
<column name="id"
        type="INTEGER"
        default="0"
        required="true"
        primaryKey="true"
        autoIncrement="true" />
<column name="lang"
        type="CHAR"
        size="5"
        required="true"
        description="code of the lang"
        label="[@ADMIN.LANG_CODE]"
        edittype="text" />
<column name="title"
        type="VARCHAR"
        size="255"
        label="[@COMMON.LANG]"
        edittype="text" />
<column name="textgroups"
        type="VARCHAR"
        size="255"
	visibility="hidden"
	edittype="text"  />
<column name="translators"
        type="VARCHAR"
        label="[@ADMIN.TRANSLATORS]"
        edittype="text" />
<column name="modificationdate"
        type="DATE" />
<column name="creationdate"
        type="DATE"
	visibility="hidden"
	edittype="date" />
<column name="rank"
        type="INTEGER"
        default="0"
        required="true" />
<column name="status"
        type="TINYINT"
        default="1"
        required="true" />
<vcolumn name="protected"
        label="[@COMMON.PROTECTED]"
        edittype="boolean" />
<column name="upd"
        type="TIMESTAMP" />
<index name="index_lang">
<index-column name="lang" />
</index>
<unique name="unique_lang">
<unique-column name="lang" />
<unique-column name="textgroups" />
</unique>
</table>

<!-- added by Jean Lamy | 2005-01-26 -->
<table name="search_engine"
		description="Table contenant l'index pour le moteur de recherche"
		writeright=""
		protectright="">
<column name="identity"
		type="INTEGER"
		default="0"
		required="true" />
<column name="tablefield"
		type="INTEGER"
		default="0"
		required="true" />
<column name="word"
		type="VARCHAR(64)"
		default=""
		required="true" />
<column name="weight"
		type="DOUBLE"
		default="0"
		required="true" />
<index name="index_word">
<index-column name="word" />
</index>
<index name="index_identity">
<index-column name="identity" />
</index>
</table>
</database>
